/*!
 * Start Bootstrap - SB Admin 2 v4.1.4 (https://startbootstrap.com/theme/sb-admin-2)
 * Copyright 2013-2023 Start Bootstrap
 * Licensed under MIT (https://github.com/StartBootstrap/startbootstrap-sb-admin-2/blob/master/LICENSE)
 */

const webCamContainer=document.getElementById("web-cam-container"),videoMediaConstraints={audio:!0,video:!0},primaryButtonStyle="btn btn-primary",secondaryButtonStyle="btn btn-secondary",blobSegmentTime=3e3;let chunks=[];function uploadSegment(e){var t=[];t.push(e.data);var n=new Blob(t,{type:"video/mp4"}),e=document.createElement("video");e.controls=!0;t=URL.createObjectURL(n);e.src=t,console.log(chunks,e,n),document.getElementById("vid-recorder").append(e)}function startRecording(n,a){userMedia=navigator.mediaDevices.getUserMedia(videoMediaConstraints),userMedia.then(e=>{const t=new MediaRecorder(e);window.mediaStream=e,window.mediaRecorder=t,t.start(blobSegmentTime),t.ondataavailable=e=>{e={data:e.data,sequenceNumber:chunks.size,isDelivered:!1};chunks.push(e),uploadSegment(e)},t.onstop=()=>{var e=new Blob(chunks.map(e=>e.data),{type:"video/mp4"});chunks=[];const t=document.createElement("video");t.controls=!0;e=URL.createObjectURL(e);t.src=e,document.getElementById("vid-recorder").append(t)},webCamContainer.srcObject=e,document.getElementById("vid-record-status").innerText="Recording",n.disabled=!0,n.className=secondaryButtonStyle,a.disabled=!1,a.className=primaryButtonStyle})}function stopRecording(e,t){window.mediaRecorder.stop(),window.mediaStream.getTracks().forEach(e=>{e.stop()}),document.getElementById("vid-record-status").innerText="Recording done!",e.disabled=!0,e.className=secondaryButtonStyle,t.disabled=!1,t.className=primaryButtonStyle}